var myWinesModel=function(){"use strict";var e={},t="myWinesModel",n=[];return e.winesAdded=new Event(t),e.winesRemoved=new Event(t),e.addWines=function(t){n=t,e.winesAdded.notify({wines:$.extend(!0,[],n)})},e.removeWines=function(){n.length=0,e.winesRemoved.notify()},e.getWines=function(){return $.extend(!0,[],n)},e.getWine=function(e,t){if("object"==typeof e&&!$.isEmptyObject(e))return"undefined"==typeof e.sIndex?n[e.id][e.cat]:{content:n[e.id][e.cat],sIndex:e.sIndex||0};if("number"!=typeof e||0>e)return!1;if(0>=t)return{curr:n[e]};var i=0>e-1?11:e-1;return{curr:n[e],prev:n[i]}},e}(),myWinesView=function(){"use strict";var e={},t=null,n="myWinesView",i={},o=null,c={},l=null,s=null,a=!1;return e.backButtonClicked=new Event(n),e.homeButtonClicked=new Event(n),e.previousWineButtonClicked=new Event(n),e.selectionClicked=new Event(n),ClickControl&&(i.back=new ClickControl({selector:"#mywines",childSelector:".mp3-header .icon-left",callback:function(){e.backButtonClicked.notify()}}),i.home=new ClickControl({selector:"#mywines",childSelector:".mp3-header .icon-right",callback:function(){e.homeButtonClicked.notify()}}),i.previouswinebutton=new ClickControl({selector:"#mywines",childSelector:".previous-container .previous-button",callback:function(){e.previousWineButtonClicked.notify()}}),i.selectionItem=new ClickControl({selector:"#mywines",childSelector:".bar-item, .wine-item, .previous-container .previous-item",callback:function(){e.selectionClicked.notify({id:$(this).attr("data-id"),cat:$(this).attr("data-cat")})}})),e.start=function(){t=new PageTransitions({el:"#mywines",transition:"left"}),o=_.template($(".mywines-main-template").html()),l=new IScroll("#mywines .wrapper-scroller",{probeType:3,hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0})},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(t){e.removeTemplate(),$("#mywines .scroller").append(o(t)),c.center=new centerCarousel("#mywines .wine-container",{onCarouselTap:function(){},onCarouselChange:function(e,t){$("#mywines .bar .content .bar-list .bar-item").eq(e).addClass("active").siblings().removeClass("active"),$("#mywines .bar .content .bar-list").height($("#mywines .bar .content .bar-list .bar-item").eq(e).outerHeight()).css({"-webkit-transform":"translate3d("+-(100/t*e)+"%,0,0)",transform:"translate3d("+-(100/t*e)+"%,0,0)"}),$(".generic-button a").attr("href",$("#mywines .wine-item").eq(e).attr("data-product-link"))}}),c.center.next(),l.refresh(),$("#mywines .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines .content-wrapper").remove()},e.togglePreviousWines=function(){clearTimeout(s);var e=$("#mywines .previous-container .previous-list"),t=$("#mywines .previous-container .previous-button");e.toggleClass("active"),t.toggleClass("active");var n=e.hasClass("active")?e.get(0).scrollHeight+$("#mywines .generic-button-container").outerHeight():0;return e.height(n),l?(l.scrollTo(0,0,300,IScroll.utils.ease.quadratic),void transitionEnd(e,function(){l.refresh()})):!0},e.show=function(e,n){a=!0,$("#mywines, .trans-overlay").addClass("active"),n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.in(n,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,n){a=!1,n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.out(n,null,function(){$("#mywines").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesController=function(){"use strict";function e(e){var t=o.getWine(e.current,e.amount);c.populateTemplate(t),c.hideLoader()}function t(){globalEvent.notify("home:show",{dir:"right"}),n.hide()}var n={},i=!1,o=myWinesModel,c=myWinesView;return globalEvent.attach("app:ready",function(){n.start()}),globalEvent.attach("mywines:show",function(t){Queueing.get("mywines").addTo(function(){n.show(function(){Queueing.get("mywines").setActive(!1).trigger()},t)}),c.showLoader(),globalEvent.notify("permission:populatemywines",{callback:function(t){return t.value||Queueing.get("mywines").addTo(function(){c.hideLoader(),globalEvent.notify("home:show"),n.hide(function(){Queueing.get("mywines").setActive(!1).removeAll()},{dir:"left"})}),t.complimentary?(e(t),!0):void e(t)}})}),o.winesAdded.attach(function(){}),o.winesRemoved.attach(function(){}),c.backButtonClicked.attach(function(){t()}),c.homeButtonClicked.attach(function(){t()}),c.previousWineButtonClicked.attach(function(){globalEvent.notify("permission:canShowPreviousItems",{callback:function(e){return e.value?void c.togglePreviousWines():(globalEvent.notify("messages:nonmember"),!1)}})}),c.selectionClicked.attach(function(e,t){globalEvent.notify("mywineslist:show",t),n.hide(!1,{dir:"right"})}),n.start=function(){c.start(),Queueing.set("mywines")},n.hide=function(e,t){i=!1,c.hide(function(){c.removeTemplate(),"function"==typeof e&&e()},t)},n.show=function(e,t){i=!0,c.showLoader(),c.show(function(){c.hideLoader(),"function"==typeof e&&e()},t)},n}(),myWinesListView=function(){"use strict";var e={},t=null,n="myWinesListView",i={},o=null,c=null,l=!1;return e.backButtonClicked=new Event(n),e.homeButtonClicked=new Event(n),e.selectionClicked=new Event(n),ClickControl&&(i.back=new ClickControl({selector:"#mywines-list",childSelector:".mp3-header .icon-left",callback:function(){e.backButtonClicked.notify()}}),i.home=new ClickControl({selector:"#mywines-list",childSelector:".mp3-header .icon-right",callback:function(){e.homeButtonClicked.notify()}}),i.selectionItem=new ClickControl({selector:"#mywines-list",childSelector:".list-item",callback:function(){e.selectionClicked.notify({id:$(this).attr("data-id"),cat:$(this).attr("data-cat"),sIndex:$(this).attr("data-section")})}})),e.start=function(){t=new PageTransitions({el:"#mywines-list",transition:"left"}),o=_.template($(".mywines-list-template").html())},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(t){e.removeTemplate(),$("#mywines-list").append(o(t)),c&&(c.destroy(),c=null),c=new IScroll("#mywines-list .wrapper-scroller",{hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0}),$("#mywines-list .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines-list > *").remove()},e.show=function(e,n){l=!0,$("#mywines-list, .trans-overlay").addClass("active"),n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.in(n,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,n){l=!1,n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.out(n,null,function(){$("#mywines-list").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesListController=function(){"use strict";function e(){globalEvent.notify("home:show",{dir:"right"}),t.hide()}var t={},n=!1,i=myWinesModel,o={},c=myWinesListView;return globalEvent.attach("app:ready",function(){t.start()}),globalEvent.attach("mywineslist:show",function(e){Queueing.get("mywineslist").addTo(function(){t.show(function(){Queueing.get("mywineslist").setActive(!1).trigger()},e)}),o.id="undefined"!=typeof e.id?e.id:o.id,o.cat="undefined"!=typeof e.cat?e.cat:o.cat,c.populateTemplate(i.getWine(o))}),i.winesRemoved.attach(function(){}),c.backButtonClicked.attach(function(){globalEvent.notify("mywines:show",{dir:"right"}),t.hide()}),c.homeButtonClicked.attach(function(){e()}),c.selectionClicked.attach(function(e,n){globalEvent.notify("mywinesdesc:show",n),t.hide(!1,{dir:"right"})}),t.start=function(){c.start(),Queueing.set("mywineslist")},t.hide=function(e,t){n=!1,c.hide(function(){c.removeTemplate(),"function"==typeof e&&e()},t)},t.show=function(e,t){n=!0,c.showLoader(),c.show(function(){c.hideLoader(),"function"==typeof e&&e()},t)},t}(),myWinesDescView=function(){"use strict";var e={},t=null,n="myWinesDescView",i={},o={},c=null,l={},s=!1;return e.backButtonClicked=new Event(n),e.homeButtonClicked=new Event(n),e.iconClicked=new Event(n),ClickControl&&(i.back=new ClickControl({selector:"#mywines-desc",childSelector:".mp3-header .icon-left",callback:function(){e.backButtonClicked.notify()}}),i.home=new ClickControl({selector:"#mywines-desc",childSelector:".mp3-header .icon-right",callback:function(){e.homeButtonClicked.notify()}}),i.iconSelected=new ClickControl({selector:"#mywines-desc",childSelector:".icon-item",callback:function(){e.iconClicked.notify(),o.center&&o.center.slidePane($(this).index()),o.left&&o.left.slidePane($(this).index())}})),e.start=function(){t=new PageTransitions({el:"#mywines-desc",transition:"left"}),c=_.template($(".mywines-desc-template").html())},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(t){if(e.removeTemplate(),$("#mywines-desc").append(c(t)),o.center=new centerCarousel("#mywines-desc .icon-container",{noDrag:!0,onCarouselTap:function(){},onCarouselChange:function(e){$("#mywines-desc .content > .icon-container .icon-list .icon-item").eq(e).addClass("active").siblings().removeClass("active"),o.left&&o.left.slidePane(e,!0)}}),o.left=new centerCarousel("#mywines-desc .desc-container",{noDrag:!0,onCarouselTap:function(){},onCarouselChange:function(e){o.center&&o.center.slidePane(e)}}),"undefined"!=typeof t.sIndex&&(o.center.movePane(t.sIndex,!0),o.left.movePane(t.sIndex)),$.isEmptyObject(l))$("#mywines-desc .desc-item").each(function(){l["desc-item-"+$(this).index()]=new IScroll("#"+$(this).attr("id"),{hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0})});else for(var n in l)l[n].destroy(),l[n]=null,l[n]=new IScroll("#"+n,{hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0});$("#mywines-desc .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines-desc > *").remove()},e.show=function(e,n){s=!0,$("#mywines-desc, .trans-overlay").addClass("active"),n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.in(n,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,n){s=!1,n=!$.isEmptyObject(n)&&n&&"undefined"!=typeof n.dir?n.dir:"left",t.out(n,null,function(){$("#mywines-desc").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesDescController=function(){"use strict";function e(){globalEvent.notify("home:show",{dir:"right"}),t.hide()}var t={},n=!1,i=myWinesModel,o={},c=myWinesDescView;return globalEvent.attach("app:ready",function(){t.start()}),globalEvent.attach("mywinesdesc:show",function(e){Queueing.get("mywinesdesc").addTo(function(){t.show(function(){Queueing.get("mywinesdesc").setActive(!1).trigger()},e)}),o.id="undefined"!=typeof e.id?e.id:o.id,o.cat="undefined"!=typeof e.cat?e.cat:o.cat,o.sIndex="undefined"!=typeof e.sIndex?e.sIndex:o.sIndex,c.populateTemplate(i.getWine(o))}),i.winesRemoved.attach(function(){}),c.backButtonClicked.attach(function(){globalEvent.notify("mywineslist:show",{dir:"right"}),t.hide()}),c.homeButtonClicked.attach(function(){e()}),t.start=function(){c.start(),Queueing.set("mywinesdesc")},t.hide=function(e,t){n=!1,c.hide(function(){c.removeTemplate(),"function"==typeof e&&e()},t)},t.show=function(e,t){n=!0,c.showLoader(),c.show(function(){c.hideLoader(),"function"==typeof e&&e()},t)},t}();