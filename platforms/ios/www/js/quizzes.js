var quizzesModel=function(){"use strict";var e={},t="quizzesModel",i={img:"",index:"0",name:"Q01 - Free",questions:[{a:["Thai green curry","Scallops","Beef Bourguignon","Sticky toffee pudding"],c:1,q:"What food pairs well with Chablis Premier Cru?"},{a:["Viognier and Shiraz","Merlot and Cabernet Sauvignon","Garnacha and Carignan","Pinot Noir and Chardonnay"],c:2,q:"Which varieties are commonly blended with Tempranillo?"},{a:["Traditional method","Tank","Soda stream","Charmat"],c:0,q:"What is the method used to make Cremant d’Loire"},{a:["Nuit-Saint- George","Mâconnais","Cote d’Or","Beaujolais"],c:1,q:"Which area in Burgundy produces the most white wine?"},{a:["Continental","Mediterranean","Maritime","High altitudes"],c:0,q:"What climate influences the wines made in Rioja?"}]},n=[];return e.quizzesAdded=new Event(t),e.quizzesRemoved=new Event(t),e.addQuizzes=function(t){n=t,e.quizzesAdded.notify({quizzes:$.extend(!0,[],n)})},e.removeQuizzes=function(){n.length=0,e.quizzesRemoved.notify()},e.getQuizzes=function(){return $.extend(!0,[],n)},e.getQuizz=function(e){return"free"===e?{curr:i,prev:n}:{curr:n[e],prev:n}},e}(),quizzesView=function(){"use strict";var e={},t=null,i="quizzesView",n={},o=null,r=null,a=null,s=null,u=null,l=!1;return e.backButtonClicked=new Event(i),e.quizAnswerClicked=new Event(i),e.homeButtonClicked=new Event(i),e.shareButtonClicked=new Event(i),e.previousQuizButtonClicked=new Event(i),e.previousQuizItemClicked=new Event(i),e.selectionMemberOnlyClicked=new Event(i),ClickControl&&(n.back=new ClickControl({selector:"#quizzes",childSelector:".mp3-header .icon-left",callback:function(){e.backButtonClicked.notify()}}),n.answer=new ClickControl({selector:"#quizzes",childSelector:".quiz-item .answer-item",callback:function(){$(this).addClass("active").siblings().removeClass("active"),e.quizAnswerClicked.notify({quizid:$(this).attr("data-quiz"),id:$(this).attr("data-id")})}}),n.home=new ClickControl({selector:"#quizzes",childSelector:".mp3-header .icon-right",callback:function(){e.homeButtonClicked.notify()}}),n.share=new ClickControl({selector:"#quizzes",childSelector:".share .sharebox",callback:function(){e.shareButtonClicked.notify()}}),n.previousquizbutton=new ClickControl({selector:"#quizzes",childSelector:".previous-container .previous-button",callback:function(){e.previousQuizButtonClicked.notify()}}),n.previousquizitem=new ClickControl({selector:"#quizzes",childSelector:".previous-container .previous-item",callback:function(){return $(this).hasClass("noclick")?(e.selectionMemberOnlyClicked.notify(),!0):void e.previousQuizItemClicked.notify({id:$(this).attr("data-id")})}})),e.start=function(){t=new PageTransitions({el:"#quizzes",transition:"left"}),o=_.template($(".quiz-template").html()),a=_.template($(".quiz-score-template").html()),r=_.template($(".quiz-list-template").html())},e.moveQuiz=function(e){var t=$("#quizzes .quiz-item"),i=100/t.length*e;$("#quizzes .quiz-list").css({"-webkit-transform":"translate3d(-"+i+"%,0,0)",transform:"translate3d(-"+i+"%,0,0)"}),$("#quizzes > .tab-arrows .tab-container").css({"-webkit-transform":"translate3d("+(i>>0)+"%,0,0)",transform:"translate3d("+(i>>0)+"%,0,0)"})},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateScoreTemplate=function(t){e.removeScoreTemplate(),$("#quizzes .quiz-item.score .yourscore").append(a(t))},e.populateTemplate=function(t){e.removeTemplate(),$("#quizzes").append(o(t));var i=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list .quiz-item"),n=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list");i.width(n.width()-(window.innerWidth<=320?20:60)),n.width(i.length*n.width()),s&&(s.destroy(),s=null),s=new IScroll("#quizzes .wrapper-scroller",{hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0})},e.populateQuizListTemplate=function(t){e.removeQuizListTemplate(),$("#quizzes .scroller .previous-container").before(r(t));var i=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list .quiz-item"),n=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list");i.width(n.width()-(window.innerWidth<=320?20:60)),n.width(i.length*n.width()),s&&(s.destroy(),s=null),s=new IScroll("#quizzes .wrapper-scroller",{hScrollbar:!1,vScrollbar:!1,hideScrollbar:!0,hideScrollbars:!0}),e.moveQuiz(0)},e.removeQuizListTemplate=function(){$("#quizzes .content-wrapper").remove()},e.removeTemplate=function(){$("#quizzes .tab-arrows, #quizzes .wrapper-scroller").remove()},e.removeScoreTemplate=function(){$("#quizzes .quiz-item.score .yourscore .score-container").remove()},e.togglePreviousQuizzes=function(){clearTimeout(u);var e=$("#quizzes .previous-container .previous-list"),t=$("#quizzes .previous-container .previous-button");e.toggleClass("active"),t.toggleClass("active");var i=e.hasClass("active")?e.get(0).scrollHeight:0;return e.height(i),s?(e.hasClass("active")||s.scrollTo(0,0,300,IScroll.utils.ease.quadratic),void transitionEnd(e,function(){s.refresh()})):!0},e.show=function(e,i){l=!0,$("#quizzes, .trans-overlay").addClass("active"),i=!$.isEmptyObject(i)&&i&&"undefined"!=typeof i.dir?i.dir:"left",t.in(i,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,i){l=!1,i=!$.isEmptyObject(i)&&i&&"undefined"!=typeof i.dir?i.dir:"left",t.out(i,null,function(){$("#quizzes").removeClass("active"),"function"==typeof e&&e()})},e}(),quizzesController=function(){"use strict";function e(e){s.id=e.current;var t=a.getQuizz(s.id,e.amount);u.populateTemplate($.extend(!0,{allowed:e.allowed},t)),u.hideLoader()}function t(e){var t=a.getQuizz(parseInt(e.id));u.populateQuizListTemplate($.extend(!0,{},t))}function i(e){s={userAnswers:{},cid:0,pid:0,cscore:0,mscore:0,id:"undefined"==typeof e?(new Date).getMonth():e}}function n(){globalEvent.notify("home:show",{dir:"right"}),o.hide()}var o={},r=!1,a=quizzesModel,s={},u=quizzesView;return globalEvent.attach("app:ready",function(){o.start()}),globalEvent.attach("quizzes:show",function(t){Queueing.get("quizzes").addTo(function(){o.show(function(){Queueing.get("quizzes").setActive(!1).trigger()},t)}),u.showLoader(),globalEvent.notify("permission:populatequizzes",{callback:function(t){return t.value||Queueing.get("quizzes").addTo(function(){u.hideLoader(),globalEvent.notify("home:show"),o.hide(function(){Queueing.get("quizzes").setActive(!1).removeAll()},{dir:"left"})}),i(),t.complimentary?(e($.extend({current:"free"},t)),!0):void e(t)}})}),a.quizzesAdded.attach(function(){}),a.quizzesRemoved.attach(function(){}),u.backButtonClicked.attach(function(){return s.cid<=0?(globalEvent.notify("home:show",{dir:"right"}),o.hide(),!0):(s.pid=s.cid,s.cid=parseInt(s.cid)-1,void u.moveQuiz(s.cid))}),u.shareButtonClicked.attach(function(){globalEvent.notify("share",{id:"quiz",content:s.cscore})}),u.selectionMemberOnlyClicked.attach(function(){globalEvent.notify("messages:restrictedmember")}),u.previousQuizItemClicked.attach(function(e,n){i(parseInt(n.id)),t(n)}),u.quizAnswerClicked.attach(function(e,t){s.userAnswers[t.quizid]=t.id,s.pid=t.quizid,s.cid=parseInt(t.quizid)+1;var i=a.getQuizz(s.id).curr.questions;if(s.cid>=i.length){for(var n={score:0,maxscore:i.length,desc:"Congratulations!"},o=0,r=i.length,l=Object.keys(s.userAnswers);r>o;o++)parseInt(s.userAnswers[l[o]])===parseInt(i[o].c)&&n.score++;s.cscore=n.score,s.maxscore=n.maxscore,u.populateScoreTemplate(n)}u.moveQuiz(s.cid)}),u.homeButtonClicked.attach(function(){n()}),u.previousQuizButtonClicked.attach(function(){globalEvent.notify("permission:canShowPreviousItems",{callback:function(e){return e.value?void u.togglePreviousQuizzes():(globalEvent.notify("messages:nonmember"),!1)}})}),o.start=function(){u.start(),Queueing.set("quizzes")},o.hide=function(e,t){r=!1,u.hide(function(){u.removeTemplate(),i(),"function"==typeof e&&e()},t)},o.show=function(e,t){r=!0,u.showLoader(),u.show(function(){u.hideLoader(),"function"==typeof e&&e()},t)},o}();